package ua.com.juja.sqlcmd.controller;import ua.com.juja.sqlcmd.controller.command.*;import ua.com.juja.sqlcmd.model.DatabaseManager;import ua.com.juja.sqlcmd.view.View;public class MainController {    private View view;    private DatabaseManager databaseManager;    private Command[] commands;    public MainController(View view, DatabaseManager databaseManager, Command[] commands) {        this.view = view;        this.databaseManager = databaseManager;        this.commands = commands;    }    public void run() {        view.write("Привет юзер!");        view.write("Введи, пожалуйста имя базы данных, имя пользователя и пароль в формате: connect|database|userName|password");        while (true) {            String input = view.read();            try {                handleInput(input);            } catch (ExitException e) {                break;            } catch (IllegalArgumentException e) {                view.write("Неудача! по причине: " + e.getMessage());                view.write("Повтори попытку.");            }            view.write("Введи команду (или help для помощи):");        }    }    private void handleInput(String input) {        for (Command command : commands) {            if (command.canProcess(input)) {                if (command.needsConnection() && !databaseManager.isConnected()) {                    view.write("Вы не можете пользоваться командой \'"+input+"\' пока " +                            "не подключитесь с помощью комманды connect|databaseName|userName|password");                    break;                } else {                    command.process(input);                    break;                }            }        }    }}